CREATE  TABLE reception_salama.dbo.AR_famille ( 
	FA_CodeFamille       bigint      NOT NULL AUTO_INCREMENT,
	FA_designation       varchar(20)      NULL,
	CONSTRAINT pk_AR_famille PRIMARY KEY  ( FA_CodeFamille ) 
 );
GO

CREATE  TABLE reception_salama.dbo.AR_presentation ( 
	presentation_ref     int      NOT NULL AUTO_INCREMENT,
	presentation         varchar(30)      NULL,
	CONSTRAINT pk_AR_presentation PRIMARY KEY  ( presentation_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.article ( 
	AR_ref               varchar(19)      NOT NULL,
	AR_designation       varchar(69)      NULL,
	FA_CodeFamille       bigint      NULL,
	CONSTRAINT pk_article PRIMARY KEY  ( AR_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.article_adresse ( 
	AR_adresse_ref       varchar(10)      NOT NULL,
	adresse              varchar(69)      NULL,
	AR_ref               varchar(19)      NULL,
	CONSTRAINT pk_article_adresse PRIMARY KEY  ( AR_adresse_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.controle_condition ( 
	cond_controle_ref    int      NOT NULL AUTO_INCREMENT,
	notation             int      NOT NULL,
	normes               varchar(20)      NULL,
	libelle              varchar(20)      NULL,
	CONSTRAINT pk_cond_primaire PRIMARY KEY  ( cond_controle_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.dosage_Unite ( 
	d_unite_Ref          int      NOT NULL AUTO_INCREMENT,
	d_unite              varchar(10)      NULL,
	CONSTRAINT pk_dosage_Unite PRIMARY KEY  ( d_unite_Ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.fiche ( 
	id_Fiche             bigint      NOT NULL AUTO_INCREMENT,
	date_controle        date  DEFAULT getdate()    NOT NULL,
	CONSTRAINT pk_fiche PRIMARY KEY  ( id_Fiche ) 
 );
GO

CREATE  TABLE reception_salama.dbo.forme ( 
	AR_forme_ref         int      NOT NULL AUTO_INCREMENT,
	forme                varchar(50)      NULL,
	CONSTRAINT pk_AR_Forme PRIMARY KEY  ( AR_forme_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.fournisseur ( 
	fournisseur_ref      bigint      NOT NULL AUTO_INCREMENT,
	fournisseur          varchar(50)      NULL,
	CONSTRAINT pk_fournisseur PRIMARY KEY  ( fournisseur_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.migrations ( 
	id                   int    IDENTITY  NOT NULL,
	migration            nvarchar(255)      NOT NULL,
	batch                int      NOT NULL,
	CONSTRAINT PK__migratio__3213E83F4E67AE13 PRIMARY KEY  ( id ) 
 );
GO

CREATE  TABLE reception_salama.dbo.posts ( 
	id                   bigint    IDENTITY  NOT NULL,
	titre_post           nvarchar(255)      NOT NULL,
	CONSTRAINT PK__post__3213E83FEB6E1FB9 PRIMARY KEY  ( id ) 
 );
GO

CREATE  TABLE reception_salama.dbo.stock ( 
	id_stock             bigint      NOT NULL AUTO_INCREMENT,
	AR_ref               varchar(19)      NULL,
	num_lot              int      NULL,
	date_fab             date      NULL,
	date_exp             date      NULL,
	AR_adresse_ref       varchar(10)      NULL,
	quantite             int      NULL,
	observation          text      NULL,
	volume               float      NULL,
	poids                float      NULL,
	CONSTRAINT pk_stock PRIMARY KEY  ( id_stock ) 
 );
GO

CREATE  TABLE reception_salama.dbo.stockage_conserv ( 
	stockage_conserv_ref int      NOT NULL AUTO_INCREMENT,
	stockage_conserv     varchar(50)      NULL,
	CONSTRAINT pk_stockage_conserv PRIMARY KEY  ( stockage_conserv_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.users ( 
	id                   bigint    IDENTITY  NOT NULL,
	name                 nvarchar(255)      NOT NULL,
	email                nvarchar(255)      NOT NULL,
	password             nvarchar(255)      NOT NULL,
	post_id              bigint      NOT NULL,
	CONSTRAINT PK__users__3213E83FA605D8A1 PRIMARY KEY  ( id ) 
 );
GO

CREATE UNIQUE  INDEX users_email_unique ON reception_salama.dbo.users ( email );
GO

CREATE  TABLE reception_salama.dbo.details_Fiche ( 
	dt_Fiche_ref         bigint      NOT NULL AUTO_INCREMENT,
	id_Fiche             bigint      NOT NULL,
	AR_Ref               varchar(19)      NOT NULL,
	AR_forme_ref         int      NULL,
	dosage               float      NULL,
	d_unite_Ref          int      NULL,
	presentation_ref     int      NULL,
	fabricant            varchar(50)      NULL,
	fournisseur_ref      bigint      NULL,
	quantite             bigint      NOT NULL,
	stockage_conserv_ref int      NULL,
	num_Lot              bigint      NULL,
	date_fab             date      NOT NULL,
	date_peremp          date      NOT NULL,
	AR_adresse_ref       varchar(10)      NULL,
	volume               float      NULL,
	poids                float      NULL,
	etat                 int      NULL,
	CONSTRAINT pk_DT_Fiche PRIMARY KEY  ( dt_Fiche_ref ) 
 );
GO

CREATE  TABLE reception_salama.dbo.dt_fiche_cond_score ( 
	dt_fiche_ref         bigint      NOT NULL AUTO_INCREMENT,
	condition_ref        int      NULL,
	score                int  DEFAULT 0    NULL,
	observation          varchar(20)      NULL
 );
GO

CREATE  TABLE reception_salama.dbo.fiche_reference ( 
	ref_marche           varchar(20)      NOT NULL,
	date_livraison       date  DEFAULT getdate()    NOT NULL,
	fournisseur_ref      bigint      NULL,
	id_Fiche             bigint      NOT NULL
 );
GO

CREATE  TABLE reception_salama.dbo.fiche_stock ( 
	id_fiche_stock       bigint      NOT NULL AUTO_INCREMENT,
	date                 date  DEFAULT getdate()    NULL,
	id_stock             bigint      NULL,
	CONSTRAINT pk_fiche_stock PRIMARY KEY  ( id_fiche_stock ) 
 );
GO

CREATE  TABLE reception_salama.dbo.inventaire_stock ( 
	id_inventaire        bigint      NOT NULL AUTO_INCREMENT,
	id_fiche_stock       bigint      NULL,
	quantite             int      NULL,
	date_inventaire      date  DEFAULT getdate()    NULL,
	observations         text      NULL,
	CONSTRAINT pk_inventaire_stock PRIMARY KEY  ( id_inventaire ) 
 );
GO

CREATE  TABLE reception_salama.dbo.details_fiche_stock ( 
	id_fiche_stock       bigint      NULL AUTO_INCREMENT,
	fournisseur_ref      bigint      NULL,
	client_ref           int      NULL,
	num_doc              varchar(20)      NULL,
	entree               int      NULL,
	sortie               int      NULL,
	date                 date  DEFAULT getdate()    NULL,
	observations         text      NULL
 );
GO

ALTER TABLE reception_salama.dbo.article ADD CONSTRAINT fk_article_ar_famille FOREIGN KEY ( FA_CodeFamille ) REFERENCES reception_salama.dbo.AR_famille( FA_CodeFamille ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.article_adresse ADD CONSTRAINT fk_article_adresse_article FOREIGN KEY ( AR_ref ) REFERENCES reception_salama.dbo.article( AR_ref );
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_dt_fiche_ar_presentation FOREIGN KEY ( presentation_ref ) REFERENCES reception_salama.dbo.AR_presentation( presentation_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_details_fiche_article FOREIGN KEY ( AR_Ref ) REFERENCES reception_salama.dbo.article( AR_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_details_fiche_articles FOREIGN KEY ( AR_adresse_ref ) REFERENCES reception_salama.dbo.article_adresse( AR_adresse_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_dt_fiche_dosage_unite FOREIGN KEY ( d_unite_Ref ) REFERENCES reception_salama.dbo.dosage_Unite( d_unite_Ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_details_fiche_fiche FOREIGN KEY ( id_Fiche ) REFERENCES reception_salama.dbo.fiche( id_Fiche );
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_dt_fiche_ar_forme FOREIGN KEY ( AR_forme_ref ) REFERENCES reception_salama.dbo.forme( AR_forme_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_dt_fiche_fournisseur FOREIGN KEY ( fournisseur_ref ) REFERENCES reception_salama.dbo.fournisseur( fournisseur_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_Fiche ADD CONSTRAINT fk_dt_fiche_stockage_conserv FOREIGN KEY ( stockage_conserv_ref ) REFERENCES reception_salama.dbo.stockage_conserv( stockage_conserv_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.details_fiche_stock ADD CONSTRAINT fk_details_fiche_stock FOREIGN KEY ( id_fiche_stock ) REFERENCES reception_salama.dbo.fiche_stock( id_fiche_stock );
GO

ALTER TABLE reception_salama.dbo.details_fiche_stock ADD CONSTRAINT fk_details_fiche_stocks FOREIGN KEY ( fournisseur_ref ) REFERENCES reception_salama.dbo.fournisseur( fournisseur_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.dt_fiche_cond_score ADD CONSTRAINT fk_dt_fiche_cond FOREIGN KEY ( condition_ref ) REFERENCES reception_salama.dbo.controle_condition( cond_controle_ref );
GO

ALTER TABLE reception_salama.dbo.dt_fiche_cond_score ADD CONSTRAINT fk_dt_fiche_cond_details_fiche FOREIGN KEY ( dt_fiche_ref ) REFERENCES reception_salama.dbo.details_Fiche( dt_Fiche_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.fiche_reference ADD CONSTRAINT fk_fiche_reference_fiche FOREIGN KEY ( id_Fiche ) REFERENCES reception_salama.dbo.fiche( id_Fiche ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.fiche_reference ADD CONSTRAINT fk_fiche_reference_fournisseur FOREIGN KEY ( fournisseur_ref ) REFERENCES reception_salama.dbo.fournisseur( fournisseur_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.fiche_stock ADD CONSTRAINT fk_fiche_stock_stock FOREIGN KEY ( id_stock ) REFERENCES reception_salama.dbo.stock( id_stock ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.inventaire_stock ADD CONSTRAINT fk_inventaire_stock FOREIGN KEY ( id_fiche_stock ) REFERENCES reception_salama.dbo.fiche_stock( id_fiche_stock ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.stock ADD CONSTRAINT fk_article_stock FOREIGN KEY ( AR_ref ) REFERENCES reception_salama.dbo.article( AR_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.stock ADD CONSTRAINT fk_stock_article_adresse FOREIGN KEY ( AR_adresse_ref ) REFERENCES reception_salama.dbo.article_adresse( AR_adresse_ref ) ON DELETE CASCADE ON UPDATE CASCADE;
GO

ALTER TABLE reception_salama.dbo.users ADD CONSTRAINT users_post_id_foreign FOREIGN KEY ( post_id ) REFERENCES reception_salama.dbo.posts( id );
GO

